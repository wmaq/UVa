buf[strcspn(buf, "\n")] = '\0';